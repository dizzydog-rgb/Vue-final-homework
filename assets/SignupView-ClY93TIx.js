import{r,o as g,a as u,b as d,c as f,d as v,e as k,f as s,w as C,g as a,v as n,h as b,i as h,j as x}from"./index-DjqwDU9j.js";const y={id:"signUpPage",class:"bg-yellow"},V={class:"conatiner signUpPage vhContainer"},p="https://todolist-api.hexschool.io",$={__name:"SignupView",setup(U){const e=r({email:"",password:"",passwordCheck:"",nickname:""}),m=r(""),i=async function(){if(e.value.password===e.value.passwordCheck)try{const t=await u.post(`${p}/users/sign_up`,e.value);console.log(t.data),m.value=t.data.uid,d.push("/"),alert("註冊成功，即將跳轉到登入頁")}catch(t){console.log(t),alert("註冊失敗，請重試")}else Object.assign(e.value,{email:"",password:"",passwordCheck:"",nickname:""}),alert("請重新確認密碼")},c=r({nickname:"",uid:""});return g(async function(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$)|^.*$/,"$1");console.log(t);const o=await u.get(`${p}/users/checkout`,{headers:{Authorization:t}});c.value=o.data,d.push("/todo")}),(t,o)=>{const w=f("router-link");return v(),k("div",y,[s("div",V,[o[10]||(o[10]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",{class:"formControls",action:"index.html",onSubmit:C(i,["prevent"])},[o[5]||(o[5]=s("h2",{class:"formControls_txt"},"註冊帳號",-1)),o[6]||(o[6]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),a(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":o[0]||(o[0]=l=>e.value.email=l),required:""},null,512),[[n,e.value.email]]),o[7]||(o[7]=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),a(s("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":o[1]||(o[1]=l=>e.value.nickname=l)},null,512),[[n,e.value.nickname]]),o[8]||(o[8]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),a(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":o[2]||(o[2]=l=>e.value.password=l),required:""},null,512),[[n,e.value.password]]),o[9]||(o[9]=s("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),a(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwdChecked",placeholder:"請再次輸入密碼","onUpdate:modelValue":o[3]||(o[3]=l=>e.value.passwordCheck=l),required:""},null,512),[[n,e.value.passwordCheck]]),s("input",{class:"formControls_btnSubmit",type:"button",value:"註冊帳號",onClick:i}),b(w,{class:"formControls_btnLink",to:"/"},{default:h(()=>o[4]||(o[4]=[x("登入")])),_:1})],32)])])])}}};export{$ as default};
